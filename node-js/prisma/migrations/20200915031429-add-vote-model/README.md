# Migration `20200915031429-add-vote-model`

This migration has been generated by emanuelosva at 9/14/2020, 10:14:29 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "Vote" (
    "id" TEXT NOT NULL,
    "linkId" TEXT NOT NULL,
    "userId" TEXT NOT NULL,

    FOREIGN KEY ("linkId") REFERENCES "Link"("id") ON DELETE CASCADE ON UPDATE CASCADE,
    FOREIGN KEY ("userId") REFERENCES "User"("id") ON DELETE CASCADE ON UPDATE CASCADE,
PRIMARY KEY ("id")
)

CREATE UNIQUE INDEX "Vote.linkId_userId_unique" ON "Vote"("linkId", "userId")
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200914184703-fix-name-relation-between-link-and-user..20200915031429-add-vote-model
--- datamodel.dml
+++ datamodel.dml
@@ -2,9 +2,9 @@
 // Hackersnew Clone.
 datasource db {
   provider = "sqlite"
-  url = "***"
+  url = "***"
 }
 generator client {
   provider = "prisma-client-js"
@@ -17,8 +17,9 @@
   name     String
   email    String @unique
   password String
   links    Link[]
+  votes    Vote[]
 }
 model Link {
   id          String   @id @default(uuid())
@@ -27,5 +28,16 @@
   description String
   url         String
   postedBy    User?    @relation(fields: [postedById], references: [id])
   postedById  String?
+  votes       Vote[]
 }
+
+model Vote {
+  id     String @id @default(uuid())
+  link   Link   @relation(fields: [linkId], references: [id])
+  linkId String
+  user   User   @relation(fields: [userId], references: [id])
+  userId String
+
+  @@unique([linkId, userId])
+}
```


